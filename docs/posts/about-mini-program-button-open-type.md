---
title: 微信小程序分享和客服按钮跳转之前进行自定义操作
date: 2025-06-06T08:49:19.045Z
categories: ['dev']
draft: true
---

微信小程序的`button`组件提供了分享和客服等功能，它们有个不方便之处就是点击按钮后会立马跳转，无法进行自定义操作。本文记录下如何在这两个功能跳转之前进行自定义操作。
<!-- more -->

## 背景

公司一个小程序项目开发中，遇到两个需求，分别是点击分享以及点击跳转到客服。这两个功能都是基于原生 `button` 组件实现，使用开放能力 `share` 以及 `contact`。但问题就在产品的设计，是需要在跳转之前进行一些自定义操作：
- 分享功能：需要在分享之前动态请求分享路径，还必须点击了才能请求，不能提前请求，因为接口调用会涉及到一些数据状态的变更；
- 客服功能：需要在跳转客服之前，复制一段固定文本，这个也不能提前复制到用户设备的剪切板上的吧。

但微信小程序偏偏不支持在跳转之前执行自定义操作，连使用程序模拟点击都不行，默认就是点击了立马跳转。个人感觉我这种需求还是很常见的，所以在网上搜索了一番，也问了AI，花了一些时间尝试，让我给找到了解决方案。